DROP TABLE IF EXISTS PERSON;
DROP TABLE IF EXISTS REGISTRY;
DROP TABLE IF EXISTS NOTIFICATION_SETTINGS;

CREATE TABLE PERSON(

PERSONID		serial  primary key,
PERSONUSERNAME	varchar(20) unique not null,
PERSONPASSWORD	varchar(8) not null,
PERSONEMAIL	varchar(30) not null,
PERSONSEX		varchar(20) not null,
PERSONPHONE	varchar(20) not null,
PERSONBIRTHDATE date not null
);

CREATE TABLE REGISTRY (

REGISTRYID 	serial primary key,
REGISTRYWEIGHT	real not null,
REGISTRYHEIGHT	real not null,
REGISTRYPOINT	integer,
FK_PERSONID	integer not null
);


--MODULO 5--

CREATE TABLE SPORT (

	SPORTID			NUMERIC NOT NULL PRIMARY KEY,
	SPORTNAME			VARCHAR(50) NOT NULL,
	SPORTMET			NUMERIC
	);
CREATE SEQUENCE SPORTID;



CREATE TABLE EXERCISE(
	EXERCISEID			INTEGER NOT NULL PRIMARY KEY,
	FK_SPORT			INTEGER,
	FK_PERSON			INTEGER
);
CREATE SEQUENCE EXERCISEID;

CREATE TABLE ACTIVITY(

	ACTIVITYID			 INTEGER NOT NULL PRIMARY KEY,
	ACTIVITYSTARTTIME	 TIME,
	ACTIVITYENDTIME		 TIME,
	ACTIVITYDATE		 DATE,
	ACTIVITYKM			 NUMERIC NOT NULL,
	ACTIVITYCALOR		 NUMERIC,
	ACTIVITYSTARTSITE	 VARCHAR(200),
	ACTIVITYENDSITE		 VARCHAR(200),
	FK_REGISTRY	 		INTEGER,
	FK_SPORT			INTEGER,
	FK_TRAINING			INTEGER,
	FK_EXERCISE			INTEGER
);
CREATE SEQUENCE ACTIVITYID;

-- TERMINA MODULO 5--

--MODULO 4--
CREATE TABLE NOTIFICATION_SETTINGS(

NOTIFICATIONSETTINGSID		serial  primary key,
PREFERENCEFRIENDS		boolean not null,
PREFERENCEACTIVITY		boolean not null,
PREFERENCETRAINING		boolean not null,
PREFERENCECHALLENGES	boolean not null,
PREFERENCEHYDRATION	boolean not null,
PREFERENCECALORIES		boolean not null,
PREFERENCEGAMIFICATION	boolean not null,
PREFERENCELANGUAGE		varchar(2) not null,
PREFERENCEUNIT varchar(2) not null,
PREFERENCERADIUS integer not null,
FK_PERSON		integer not null
);
--TERMINA MODULO 4--

---MODULO 8---
 
CREATE TABLE CHALLENGE (
 
CHALLENGEID serial primary key,
CHALLENGENAME varchar(30) not null,
CHALLENGEDESCRIPTION varchar(500) not null,
CHALLENGELEVEL integer,
CHALLENGESCORE integer,
FK_ACTIVITYID integer,
FK_FRIENDSHIPID integer
);
 
 
CREATE TABLE DETAIL (
DETAILID serial primary key,
DETAILDATESTART timestamp not null,
DETAILDATEEND timestamp not null,
DETAILPOSITION integer not null,
DETAILACTIVE boolean not null,
FK_REGISTRYID integer,
FK_CHALLENGEID integer
);
 
---FIN MODULO 8---

