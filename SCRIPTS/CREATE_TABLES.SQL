P TABLE IF EXISTS SPORT;
DROP TABLE IF EXISTS EXERCISE;
DROP TABLE IF EXISTS ACTIVITY;
DROP TABLE IF EXISTS NOTIFICATION_SETTINGS;
DROP TABLE IF EXISTS FOOD;
DROP TABLE IF EXISTS MOMENT;
DROP TABLE IF EXISTS DIET;
DROP TABLE IF EXISTS TRAINING;
DROP TABLE IF EXISTS SPOR_TRAINING;
DROP TABLE IF EXISTS FRIEN_TRAIN;
DROP TABLE IF EXISTS REGISTRY;
DROP TABLE IF EXISTS PERSON;
DROP TABLE IF EXISTS REGISTRY;
DROP TABLE IF EXISTS NOTIFICATION_SETTINGS;
Drop table  IF EXISTS GLASSHISTORICID;


CREATE TABLE PERSON(
	PERSONID		serial  primary key,
	PERSONUSERNAME	varchar(20) unique not null,
	PERSONPASSWORD	varchar(80) not null,
	PERSONEMAIL		varchar(50) unique not null,
	PERSONSEX		varchar(1) not null,
	PERSONPHONE		varchar(20) not null,
	PERSONBIRTHDATE date not null

);

CREATE TABLE REGISTRY (
	REGISTRYID 		serial primary key,
	REGISTRYWEIGHT	real not null,
	REGISTRYHEIGHT	real not null,
	REGISTRYPOINT	integer,
	FK_PERSONID		integer not null
);


--MODULO 3--
 
CREATE TABLE STATUS(
 
STATUSID		serial  primary key,
STATUSPENDING	integer,
STATUSACCEPTED	integer,
STATUSBLOCKED	integer,
STATUSDECLINE	integer
);
 
CREATE TABLE FRIENDSHIP(
FRIENDSHIPID                       serial  primary key,
FK_PERSONONEID		integer,
FK_PERSONTWOID	            integer,
FK_STATUSID                       integer,
FRIENDSHIPUSERACTIVITY	integer
);

CREATE TABLE GEO(
GEOID		serial  primary key,
FK_PERSONID		integer,
GEOLONGITUD	varchar(30) not null,
GEOLATITUD	varchar(30) not null
);




INSERT INTO public.status(statusid, statuspending, statusaccepted, statusblocked, statusdecline)
VALUES (1, 1,0, 0,0),(2,0,1,0,0),(3,0,0,1,0),(4,0,0,0,1);
--TERMINA MODULO 3--




--MODULO 5--

CREATE TABLE SPORT (

	SPORTID			NUMERIC NOT NULL PRIMARY KEY,
	SPORTNAME			VARCHAR(50) NOT NULL,
	SPORTMET			NUMERIC
	);
CREATE SEQUENCE SPORTID;



CREATE TABLE EXERCISE(
	EXERCISEID			INTEGER NOT NULL PRIMARY KEY,
	FK_SPORT			INTEGER,
	FK_PERSON			INTEGER
);
CREATE SEQUENCE EXERCISEID;

CREATE TABLE ACTIVITY(

	ACTIVITYID			 INTEGER NOT NULL PRIMARY KEY,
	ACTIVITYSTARTTIME	 TIME,
	ACTIVITYENDTIME		 TIME,
	ACTIVITYDATE		 DATE,
	ACTIVITYKM			 NUMERIC NOT NULL,
	ACTIVITYCALOR		 NUMERIC,
	ACTIVITYSTARTSITE	 VARCHAR(200),
	ACTIVITYENDSITE		 VARCHAR(200),
	FK_REGISTRY	 		INTEGER,
	FK_SPORT			INTEGER,
	FK_TRAINING			INTEGER,
	FK_EXERCISE			INTEGER
);
CREATE SEQUENCE ACTIVITYID;

-- TERMINA MODULO 5--

--MODULO 4--
CREATE TABLE NOTIFICATION_SETTINGS(

NOTIFICATIONSETTINGSID		serial  primary key,
PREFERENCEFRIENDS		boolean not null,
PREFERENCEACTIVITY		boolean not null,
PREFERENCETRAINING		boolean not null,
PREFERENCECHALLENGES	boolean not null,
PREFERENCEHYDRATION	boolean not null,
PREFERENCECALORIES		boolean not null,
PREFERENCEGAMIFICATION	boolean not null,
PREFERENCELANGUAGE		varchar(2) not null,
PREFERENCEUNIT varchar(2) not null,
PREFERENCERADIUS integer not null,
FK_PERSON		integer not null
);
--TERMINA MODULO 4--

-- TABLAS PERTENECIENTES AL MODULO 11

CREATE TABLE FOOD (
    FOODID SERIAL NOT NULL PRIMARY KEY,
    FOODNAME VARCHAR(150) NOT NULL,
    FOODWEIGHT NUMERIC NOT NULL,
    FOODCALORIE NUMERIC NOT NULL,
    FOODPERSONALIZED BOOLEAN NOT NULL DEFAULT TRUE,
    FOODDINNER BOOLEAN NOT NULL DEFAULT FALSE
);

CREATE TABLE MOMENT (
    MOMENTID SERIAL NOT NULL PRIMARY KEY,
    MOMENTDESCRIPTION VARCHAR(50) NOT NULL
);

CREATE TABLE DIET (
    DIETID SERIAL NOT NULL PRIMARY KEY,
    DIETCALORIE NUMERIC,
    DIETDATETIME DATE NOT NULL,
    FK_FOODID INTEGER NOT NULL,
    FK_MOMENTID INTEGER NOT NULL,
    FK_PERSONID INTEGER NOT NULL
);

-- FIN DE LAS TABLAS PERTENECIENTES AL MODULO 11

--Inicio de modulo 06--
CREATE TABLE TRAINING (
TRAININGID    integer not null,
TRAININGNAME varchar (80) not null,
TRAININGPERIOD integer not null,
TRAININGCALORIES integer not null,
FK_FRIENDSHIPID integer,
FK_USERID integer ,
constraint  PK_TRAININGID primary key (TRAININGID)

);

CREATE SEQUENCE TRAININGID;

CREATE TABLE SPOR_TRAINING (
SPOR_TRAININGID integer not null,
TYPE_COMPLEXITY varchar (90) not null,
TIMETRAINING integer ,
DISTANCE integer ,
FK_SPORTID integer ,
FK_TRAININGID integer ,
constraint PK_EXER_TRAININGID primary key (SPOR_TRAININGID)
);
CREATE SEQUENCE SPOR_TRAININGID;

CREATE TABLE FRIEN_TRAIN (
FRIEN_TRAINID integer not null,
FK_FRIENDSHIPID  integer,
FK_TRAININGID integer ,
constraint PK_FRIEN_TRAINID primary key ( FRIEN_TRAINID)
);

--- TERMINA MODULO 6  ---
	
--- MODULO 8 ---
	CREATE TABLE CHALLENGE (

CHALLENGEID serial primary key,
CHALLENGENAME varchar(30) not null,
CHALLENGEDESCRIPTION varchar(500) not null,
CHALLENGEKILOMETERS integer,
CHALLENGESCORE integer,
CHALLENGEDAYS integer,
CHALLENGETYPE varchar(4) not null,
CHALLENGEPREDEFINED varchar(1) not null
);

CREATE TABLE DETAIL (
DETAILID serial primary key,
DETAILDATESTART timestamp not null,
DETAILDATEEND timestamp not null,
DETAILACTIVE boolean not null,
FK_USERID integer,
FK_CHALLENGEID integer
);
		
--- FIN MODULO 8 ---



---MODULO 10---




CREATE TABLE GLASS_HISTORIC(

GLASSHISTORICID     INTEGER      NOT NULL,
GLASSTIME           TIMESTAMP    NOT NULL,
GLASSTYPE			INTEGER 	 NOT NULL,
FK_PERSON			INTEGER,

CONSTRAINT PK_HISCTORIC PRIMARY KEY (GLASSHISTORICID)

);





---TERMINA MODULO 10---

